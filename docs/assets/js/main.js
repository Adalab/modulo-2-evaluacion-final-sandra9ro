const button=document.querySelector(".js-button"),ulSearch=document.querySelector(".js-search-result-container"),ul=document.querySelector(".ul");let series=[],favoriteList=[];function setFavLocalStorage(){localStorage.setItem("favoriteList",JSON.stringify(favoriteList))}function getFavLocalStorage(){const e=localStorage.getItem("favoriteList"),t=JSON.parse(e);null!==t?(favoriteList=t,paintFavorites(),listenSeries(),paintSeries()):getServerData()}function getServerData(){const e=document.querySelector(".input").value;fetch(`http://api.tvmaze.com/search/shows?q=${e}`).then(function(e){return e.json()}).then(function(e){series=e}).catch(function(e){console.log("Error al traer los datos del servidor",e)}),paintSeries(),listenSeries(),paintFavorites(),listenButton()}function paintSeries(){let e="";for(let t=0;t<series.length;t++){let i=!1;for(const e of favoriteList)series[t].show.id===e.show.id&&(i=!0);!0===i?(e+=`<li class="li js-li favorites" id="${series[t].show.id}">`,e+=`<h3 class="title favorites">${series[t].show.name}</h3>`):(e+=`<li class="li js-li" id="${series[t].show.id}">`,e+=`<h3 class="title">${series[t].show.name}</h3>`),e+="<div>",null!==series[t].show.image?e+=`<img src="${series[t].show.image.medium}">`:e+='<img src="https://via.placeholder.com/210x295/ffffff/666666/?text=TV">',e+="</div>",e+="</li>"}ulSearch.innerHTML=e,listenSeries(),setFavLocalStorage(),listenButton()}function listenButton(){button.addEventListener("click",getServerData)}function listenSeries(){const e=document.querySelectorAll(".js-li");for(const t of e)t.addEventListener("click",toggleFavorites)}function paintFavorites(){let e="";const t=document.querySelector(".js-favorites-container");for(let t of favoriteList)e+='<li class="li">',e+=`<h3 class="title">${t.show.name}</h3>`,e+="<div>Esto es un a prueba",null!==t.show.image?e+=`<img src="${t.show.image.medium}">`:e+='<img src="https://via.placeholder.com/210x295/ffffff/666666/?text=TV">',e+="</div>",e+="</li>";t.innerHTML=e,listenButton()}function toggleFavorites(e){e.currentTarget;const t=parseInt(e.currentTarget.id);let i=-1;for(let e=0;e<favoriteList.length;e++)t===favoriteList[e].show.id&&(i=e);if(-1===i)for(let e=0;e<series.length;e++)t===series[e].show.id&&favoriteList.push(series[e]);else favoriteList.splice(i,1);paintSeries(),listenButton(),setFavLocalStorage(),paintFavorites()}getFavLocalStorage(),getServerData(),paintFavorites();